<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta content='text/html;charset=UTF-8' http-equiv='content-type'>
    <title>Right-angle phylograms and dendrograms with d3</title>
<link rel="stylesheet" href="https://rawgithub.com/Caged/d3-tip/master/examples/example-styles.css">
	<script src="bower/d3/d3.min.js" type="text/javascript"></script>
    <script src="bower/d3-tip/index.js" type="text/javascript"></script>
    <script src="js/newick.js" type="text/javascript"></script>
    <script src="js/d3.phylogram.js" type="text/javascript"></script>
    <script>
      function load() {
	var spp_data = {
1117: { id: 1117, clade:'',name:'Composite genome from Lake Mendota Epilimnion pan-assembly MEint.metabat.112',oid:2582580518 },
1117: { id: 1117, clade:'',name:'Composite genome from Lake Mendota Epilimnion pan-assembly MEint.metabat.548',oid:2582580584 },
1117: { id: 1117, clade:'',name:'Composite genome from Lake Mendota Epilimnion pan-assembly MEint.metabat.1300',oid:2582580525 },
1117: { id: 1117, clade:'',name:'Composite genome from Lake Mendota Epilimnion pan-assembly MEint.metabat.1627',oid:2582580537 },
1117: { id: 1117, clade:'',name:'Composite genome from Lake Mendota Epilimnion pan-assembly MEint.metabat.2353',oid:2582580551 },
1117: { id: 1117, clade:'',name:'Composite genome from Lake Mendota Epilimnion pan-assembly MEint.metabat.2384',oid:2582580552 },
1117: { id: 1117, clade:'',name:'Composite genome from Lake Mendota Epilimnion pan-assembly MEint.metabat.4498',oid:2582580576 },
1117: { id: 1117, clade:'',name:'Composite genome from Lake Mendota Epilimnion pan-assembly MEint.metabat.4500',oid:2582580577 },
1117: { id: 1117, clade:'',name:'Composite genome from Lake Mendota Epilimnion pan-assembly MEint.metabat.6097',oid:2582580591 },
1117: { id: 1117, clade:'',name:'Composite genome from Lake Mendota Epilimnion pan-assembly MEint.metabat.14445',oid:2582580531 },
1117: { id: 1117, clade:'',name:'Composite genome from Lake Mendota Epilimnion pan-assembly MEint.metabat.33807',oid:2582580567 },
1117: { id: 1117, clade:'',name:'Dapis pleousa FFP13-1',oid:2582580741 },
1117: { id: 1117, clade:'',name:'Obscuribacter phosphatis (Mle1_12)',oid:2556921048 },
1117: { id: 1117, clade:'',name:'Obscuribacteriales (17-133x coverage) Ga0065104',oid:2603880201 },
1117: { id: 1117, clade:'',name:'Obscuribacteriales (55-63x coverage) Ga0065103',oid:2603880200 },
1117: { id: 1117, clade:'',name:'Oscillatoriophycideae sp. CY2-1',oid:2606217801 },
1129: { id: 1129, clade:'5.1-UC-A',name:'Synechococcus sp. KORDI-100 (genome sequencing)',oid:2507262013 },
1131: { id: 1131, clade:'',name:'Synechococcus sp. PE A1 60AY6Li',oid:2512875017 },
1131: { id: 1131, clade:'',name:'Synechococcus sp. PE A1-1 60AY4M2',oid:2512875018 },
1131: { id: 1131, clade:'',name:'Synechococcus sp. PE A1-1 63AY4M1',oid:2512875019 },
1131: { id: 1131, clade:'',name:'Synechococcus sp. PE A1-1 65AY640',oid:2512875020 },
1131: { id: 1131, clade:'',name:'Synechococcus sp. PE A4 65AY6A5',oid:2512875021 },
1131: { id: 1131, clade:'',name:'Synechococcus sp. PE A6 63AY4M2',oid:2513020001 },
1140: { id: 1140, clade:'',name:'Synechococcus elongatus PCC 7942 (re-annotation)',oid:2606217305 },
1140: { id: 1140, clade:'',name:'Synechococcus elongatus PCC 7942 (updateJune2012)',oid:2514885031 },
1140: { id: 1140, clade:'',name:'Synechococcus elongatus PCC 7942',oid:637000308 },
32047: { id: 32047, clade:'',name:'Synechococcus leopoliensis UTEX 625a',oid:2517572104 },
32049: { id: 32049, clade:'',name:'Synechococcus sp. PCC 7002',oid:641522654 },
32051: { id: 32051, clade:'5.1B-V',name:'Synechococcus sp. WH7803',oid:640427149 },
59919: { id: 59919, clade:'HLI',name:'Prochlorococcus marinus pastoris CCMP 1986 (re-annotation)',oid:2606217259 },
59919: { id: 59919, clade:'HLI',name:'Prochlorococcus marinus pastoris CCMP 1986',oid:637000214 },
59920: { id: 59920, clade:'LLI',name:'Prochlorococcus sp. NATL2A (re-annotation)',oid:2606217240 },
59920: { id: 59920, clade:'LLI',name:'Prochlorococcus sp. NATL2A',oid:637000212 },
59921: { id: 59921, clade:'HLII',name:'Prochlorococcus sp. MIT9107',oid:2606217692 },
59922: { id: 59922, clade:'LLIV',name:'Prochlorococcus sp. MIT9303 (re-annotation)',oid:2606217667 },
59922: { id: 59922, clade:'LLIV',name:'Prochlorococcus sp. MIT9303',oid:640069323 },
59924: { id: 59924, clade:'LLI',name:'Prochlorococcus sp. PAC1',oid:2606217419 },
59925: { id: 59925, clade:'HLII',name:'Prochlorococcus sp. GP2',oid:2606217606 },
59926: { id: 59926, clade:'HLII',name:'Prochlorococcus sp. SB',oid:2606217677 },
59931: { id: 59931, clade:'',name:'Synechococcus sp. WH7805 (re-annotation)',oid:2606217325 },
59931: { id: 59931, clade:'',name:'Synechococcus sp. WH7805',oid:638341215 },
64471: { id: 64471, clade:'5.1A-I',name:'Synechococcus sp. CC9311 (re-annotation)',oid:2606217397 },
64471: { id: 64471, clade:'5.1A-I',name:'Synechococcus sp. CC9311',oid:637000309 },
69042: { id: 69042, clade:'',name:'Synechococcus sp. WH5701',oid:638341214 },
74545: { id: 74545, clade:'HLII',name:'Prochlorococcus sp. MIT9302',oid:2606217691 },
74546: { id: 74546, clade:'HLII',name:'Prochlorococcus sp. MIT9312 (re-annotation)',oid:2606217708 },
74546: { id: 74546, clade:'HLII',name:'Prochlorococcus sp. MIT9312',oid:637000210 },
74547: { id: 74547, clade:'LLIV',name:'Prochlorococcus marinus MIT9313 (re-annotation)',oid:2606217562 },
74547: { id: 74547, clade:'LLIV',name:'Prochlorococcus marinus MIT9313',oid:637000211 },
84588: { id: 84588, clade:'',name:'Synechococcus sp. WH8102 (re-annotation)',oid:2606217514 },
84588: { id: 84588, clade:'',name:'Synechococcus sp. WH8102',oid:637000314 },
91464: { id: 91464, clade:'',name:'Synechococcus sp. PCC 7335',oid:647533236 },
93057: { id: 93057, clade:'HLII',name:'Prochlorococcus sp. MIT9201',oid:2606217687 },
93058: { id: 93058, clade:'HLII',name:'Prochlorococcus sp. MIT9202 (re-annotation)',oid:2606217668 },
93058: { id: 93058, clade:'HLII',name:'Prochlorococcus sp. MIT9202',oid:647533199 },
93059: { id: 93059, clade:'LLII/III',name:'Prochlorococcus sp. MIT9211 (re-annotation)',oid:2606217555 },
93059: { id: 93059, clade:'LLII/III',name:'Prochlorococcus sp. MIT9211',oid:641228501 },
93060: { id: 93060, clade:'HLII',name:'Prochlorococcus sp. MIT9215 (re-annotation)',oid:2606217559 },
93060: { id: 93060, clade:'HLII',name:'Prochlorococcus sp. MIT9215',oid:640753041 },
110662: { id: 110662, clade:'',name:'Synechococcus sp. CC9605 (re-annotation)',oid:2606217400 },
110662: { id: 110662, clade:'',name:'Synechococcus sp. CC9605',oid:637000310 },
110663: { id: 110663, clade:'',name:'Synechococcus sp. CC9616',oid:2514885022 },
110663: { id: 110663, clade:'',name:'Synechococcus sp. CC9616',oid:2517093019 },
146785: { id: 146785, clade:'',name:'Thermosynechococcus sp. thauma (Percoll Enrichment)',oid:2565956534 },
146891: { id: 146891, clade:'HLII',name:'Prochlorococcus sp. AS9601 (re-annotation)',oid:2606217556 },
146891: { id: 146891, clade:'HLII',name:'Prochlorococcus sp. AS9601',oid:640069321 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_D18 (contamination screened) 1ary_Decontamination',oid:2615840543 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_D18',oid:2546825501 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_E6  (contamination screened) 1ary_Decontamination',oid:2615840544 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_E6',oid:2545824571 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_I4  (contamination screened) 1ary_Decontamination',oid:2615840548 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_I4',oid:2545824572 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_I9  (contamination screened) 1ary_Decontamination',oid:2615840549 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_I9',oid:2545824573 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_I11  (contamination screened) 1ary_Decontamination',oid:2615840545 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_I11',oid:2545824574 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_I15  (contamination screened) 1ary_Decontamination',oid:2615840546 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_I15',oid:2545824575 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_I23  (contamination screened) 1ary_Decontamination',oid:2615840547 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_I23',oid:2545824576 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_J2  (contamination screened) 1ary_Decontamination',oid:2615840554 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_J2',oid:2545824613 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_J5  (contamination screened) 1ary_Decontamination',oid:2615840555 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_J5',oid:2545824577 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_J8  (contamination screened) 1ary_Decontamination',oid:2615840556 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_J8',oid:2545824578 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_J9  (contamination screened) 1ary_Decontamination',oid:2615840557 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_J9',oid:2545824579 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_J11  (contamination screened) 1ary_Decontamination',oid:2615840550 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_J11',oid:2545824580 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_J17  (contamination screened) 1ary_Decontamination',oid:2615840551 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_J17',oid:2545824581 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_J20  (contamination screened) 1ary_Decontamination',oid:2615840552 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_J20',oid:2545824582 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_J22  (contamination screened) 1ary_Decontamination',oid:2615840553 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_J22',oid:2545824583 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_K10  (contamination screened) 1ary_Decontamination',oid:2615840558 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_K10',oid:2545824584 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_K11  (contamination screened) 1ary_Decontamination',oid:2615840559 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_K11',oid:2545824585 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_K16  (contamination screened) 1ary_Decontamination',oid:2615840560 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_K16',oid:2545824586 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_K18  (contamination screened) 1ary_Decontamination',oid:2615840561 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_K18',oid:2545824587 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_K20  (contamination screened) 1ary_Decontamination',oid:2615840562 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_K20',oid:2545824588 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_K21  (contamination screened) 1ary_Decontamination',oid:2615840563 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_K21',oid:2545824589 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_K22  (contamination screened) 1ary_Decontamination',oid:2615840564 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_K22',oid:2545824590 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_L2  (contamination screened) 1ary_Decontamination',oid:2615840565 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_L2',oid:2545824591 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_L3  (contamination screened) 1ary_Decontamination',oid:2615840566 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_L3',oid:2545824592 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_L6  (contamination screened) 1ary_Decontamination',oid:2615840567 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_L6',oid:2545824593 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_M6  (contamination screened) 1ary_Decontamination',oid:2615840576 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_M6',oid:2545824594 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_M7  (contamination screened) 1ary_Decontamination',oid:2615840577 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_M7',oid:2545824595 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_M10  (contamination screened) 1ary_Decontamination',oid:2615840568 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_M10',oid:2545824596 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_M13  (contamination screened) 1ary_Decontamination',oid:2615840569 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_M13',oid:2545824597 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_M16  (contamination screened) 1ary_Decontamination',oid:2615840570 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_M16',oid:2545824598 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_M19  (contamination screened) 1ary_Decontamination',oid:2615840574 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_M19',oid:2545824599 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_M20  (contamination screened) 1ary_Decontamination',oid:2615840575 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_M20',oid:2545824600 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_N7  (contamination screened) 1ary_Decontamination',oid:2615840582 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_N7',oid:2545824601 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_N11  (contamination screened) 1ary_Decontamination',oid:2615840578 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_N11',oid:2545824602 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_N18 (contamination screened) 1ary_Decontamination',oid:2615840579 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_N18',oid:2545824603 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_N22 (contamination screened) 1ary_Decontamination',oid:2615840580 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_N22',oid:2545824604 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_N23 (contamination screened) 1ary_Decontamination',oid:2615840581 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_N23',oid:2545824605 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_O10 (contamination screened) 1ary_Decontamination',oid:2615840583 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_O10',oid:2545824606 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_O11 (contamination screened) 1ary_Decontamination',oid:2615840584 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_O11',oid:2545824607 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_O14 (contamination screened) 1ary_Decontamination',oid:2615840585 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_O14',oid:2545824608 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_O17 (contamination screened) 1ary_Decontamination',oid:2615840586 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_O17',oid:2545824609 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_P8 (contamination screened) 1ary_Decontamination',oid:2615840589 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_P8',oid:2545824610 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_P10 (contamination screened) 1ary_Decontamination',oid:2615840587 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_P10',oid:2545824611 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_P19 (contamination screened) 1ary_Decontamination',oid:2615840588 },
159733: { id: 159733, clade:'',name:'Prochlorococcus_SCGC_AC-669_P19',oid:2545824612 },
166314: { id: 166314, clade:'',name:'Synechococcus sp. WH 8109',oid:647533237 },
166314: { id: 166314, clade:'',name:'Synechococcus sp. WH 8109',oid:2563366603 },
166318: { id: 166318, clade:'',name:'Synechococcus sp. WH 8016',oid:2507262052 },
167539: { id: 167539, clade:'LLII/III',name:'Prochlorococcus marinus marinus CCMP1375 (re-annotation)',oid:2606217495 },
167539: { id: 167539, clade:'LLII/III',name:'Prochlorococcus marinus marinus CCMP1375',oid:637000213 },
167542: { id: 167542, clade:'HLI',name:'Prochlorococcus sp. MIT9515 (re-annotation)',oid:2606217669 },
167542: { id: 167542, clade:'HLI',name:'Prochlorococcus sp. MIT9515',oid:640069324 },
167544: { id: 167544, clade:'HLII',name:'Prochlorococcus sp. MIT9116',oid:2606217690 },
167545: { id: 167545, clade:'HLII',name:'Prochlorococcus sp. MIT9123',oid:2606217318 },
167546: { id: 167546, clade:'HLII',name:'Prochlorococcus sp. MIT9301 (re-annotation)',oid:2606217558 },
167546: { id: 167546, clade:'HLII',name:'Prochlorococcus sp. MIT9301',oid:640069322 },
167547: { id: 167547, clade:'HLII',name:'Prochlorococcus sp. MIT9311',oid:2606217680 },
167548: { id: 167548, clade:'HLII',name:'Prochlorococcus sp. MIT9314',oid:2606217312 },
167549: { id: 167549, clade:'HLII',name:'Prochlorococcus sp. MIT9321',oid:2606217683 },
167550: { id: 167550, clade:'HLII',name:'Prochlorococcus sp. MIT9322',oid:2606217679 },
167551: { id: 167551, clade:'HLII',name:'Prochlorococcus sp. MIT9401',oid:2606217316 },
167552: { id: 167552, clade:'LLII/III',name:'Prochlorococcus sp. SS2',oid:2606217313 },
167553: { id: 167553, clade:'LLII/III',name:'Prochlorococcus sp. SS35',oid:2606217311 },
167554: { id: 167554, clade:'LLII/III',name:'Prochlorococcus sp. SS51',oid:2606217315 },
167555: { id: 167555, clade:'LLI',name:'Prochlorococcus sp. NATL1A (re-annotation)',oid:2606217557 },
167555: { id: 167555, clade:'LLI',name:'Prochlorococcus sp. NATL1A',oid:640069325 },
167556: { id: 167556, clade:'LLII/III',name:'Prochlorococcus sp. LG',oid:2606217685 },
190047: { id: 190047, clade:'HLI',name:'Prochlorococcus sp. EQPAC1',oid:2606217689 },
195248: { id: 195248, clade:'',name:'Synechococcus sp. PCC 8807',oid:2504643002 },
195250: { id: 195250, clade:'',name:'Synechococcus sp. PCC 7336',oid:2506520048 },
195253: { id: 195253, clade:'',name:'Synechococcus sp. PCC 6312',oid:2509276030 },
195498: { id: 195498, clade:'',name:'Synechococcus sp. PCC 7117',oid:2504643001 },
197221: { id: 197221, clade:'',name:'Thermosynechococcus elongatus BP-1 (re-annotation)',oid:2606217416 },
197221: { id: 197221, clade:'',name:'Thermosynechococcus elongatus BP-1',oid:637000320 },
221359: { id: 221359, clade:'5.1B-IX',name:'Synechococcus sp. RS9916',oid:639857007 },
221360: { id: 221360, clade:'5.1B-VIII',name:'Synechococcus sp. RS9917 (re-annotation)',oid:2606217719 },
221360: { id: 221360, clade:'5.1B-VIII',name:'Synechococcus sp. RS9917 (re-annotation)',oid:2606217719 },
221360: { id: 221360, clade:'5.1B-VIII',name:'Synechococcus sp. RS9917',oid:638341213 },
232348: { id: 232348, clade:'',name:'Synechococcus sp. CB0101',oid:649990022 },
232363: { id: 232363, clade:'',name:'Synechococcus sp. CB0205',oid:649990023 },
269084: { id: 269084, clade:'',name:'Synechococcus elongatus PCC 6301 (re-annotation)',oid:2606217408 },
269084: { id: 269084, clade:'',name:'Synechococcus elongatus PCC 6301',oid:637000307 },
313625: { id: 313625, clade:'5.1A-IV',name:'Synechococcus sp. BL107',oid:639857006 },
316278: { id: 316278, clade:'5.3-I / X',name:'Synechococcus sp. RCC307',oid:640427148 },
316279: { id: 316279, clade:'',name:'Synechococcus sp. CC9902 (re-annotation)',oid:2606217272 },
316279: { id: 316279, clade:'',name:'Synechococcus sp. CC9902',oid:637000311 },
321327: { id: 321327, clade:'',name:'Synechococcus sp. JA-3-3Ab (re-annotation)',oid:2606217499 },
321327: { id: 321327, clade:'',name:'Synechococcus sp. JA-3-3Ab',oid:637000313 },
321332: { id: 321332, clade:'',name:'Synechococcus sp. JA-2-3B\'a(2-13) (re-annotation)',oid:2606217245 },
321332: { id: 321332, clade:'',name:'Synechococcus sp. JA-2-3B\'a(2-13)',oid:637000312 },
374981: { id: 374981, clade:'',name:'Synechococcus sp. PCC 7003',oid:2504643000 },
374982: { id: 374982, clade:'',name:'Synechococcus sp. PCC 73109',oid:2504643003 },
431041: { id: 431041, clade:'',name:'AP Candidatus Synechococcus spongiarum LMB bulk15L1387479953114',oid:2590828845 },
431041: { id: 431041, clade:'',name:'AP Candidatus Synechococcus spongiarum LMB bulk15M1387479953166',oid:2590828852 },
431041: { id: 431041, clade:'',name:'AP Candidatus Synechococcus spongiarum LMB bulk15N1387479953208',oid:2590828847 },
431041: { id: 431041, clade:'',name:'Candidatus Synechococcus spongiarum LMB bulk15L (contamination screened)',oid:2590828844 },
431041: { id: 431041, clade:'',name:'Candidatus Synechococcus spongiarum LMB bulk15M (contamination screened)',oid:2590828853 },
431041: { id: 431041, clade:'',name:'Candidatus Synechococcus spongiarum LMB bulk15N (contamination screened)',oid:2590828846 },
431041: { id: 431041, clade:'',name:'Combined assembly of the cyanobacterial sponge symbionts',oid:2593339233 },
490193: { id: 490193, clade:'',name:'Synechococcus sp. NKBG 042902',oid:2585428034 },
569152: { id: 569152, clade:'',name:'Prochlorococcus sp. W3',oid:2551306547 },
569153: { id: 569153, clade:'',name:'Prochlorococcus sp. W4',oid:2551306560 },
569154: { id: 569154, clade:'',name:'Prochlorococcus sp. W5',oid:2551306555 },
569155: { id: 569155, clade:'',name:'Prochlorococcus sp. W6',oid:2551306659 },
585423: { id: 585423, clade:'5.1A-WPC1',name:'Synechococcus sp. KORDI-49 (genome sequencing)',oid:2507262011 },
585425: { id: 585425, clade:'5.1A-II',name:'Synechococcus sp. KORDI-52 (genome sequencing)',oid:2507262012 },
613198: { id: 613198, clade:'',name:'Prochlorococcus sp. W7',oid:2551306661 },
613199: { id: 613199, clade:'',name:'Prochlorococcus sp. W8',oid:2551306554 },
613200: { id: 613200, clade:'',name:'Prochlorococcus sp. W9',oid:2551306556 },
613201: { id: 613201, clade:'',name:'Prochlorococcus sp. W10',oid:2551306558 },
613202: { id: 613202, clade:'',name:'Prochlorococcus sp. W11',oid:2551306550 },
613203: { id: 613203, clade:'',name:'Prochlorococcus sp. W12',oid:2551306551 },
1041938: { id: 1041938, clade:'',name:'Prochlorococcus marinus bv. HNLC1',oid:2597489918 },
1203261: { id: 1203261, clade:'',name:'Prochlorococcus sp. W2',oid:2551306553 },
1301283: { id: 1301283, clade:'',name:'Oscillatoriophycideae sp. CY4',oid:2606217767 },
1394889: { id: 1394889, clade:'',name:'Thermosynechococcus sp. NK55a',oid:2597489959 },
1407650: { id: 1407650, clade:'',name:'Synechococcus sp. NKBG15041c',oid:2579778681 },
1449121: { id: 1449121, clade:'',name:'AP Candidatus Synechococcus spongiarum LMB bulk10D1382731499498',oid:2590828848 },
1449121: { id: 1449121, clade:'',name:'Candidatus Synechococcus spongiarum LMB bulk10D (contamination screened)',oid:2590828849 },
1449122: { id: 1449122, clade:'',name:'AP Candidatus Synechococcus spongiarum LMB bulk10E1382731499599',oid:2590828851 },
1449122: { id: 1449122, clade:'',name:'Candidatus Synechococcus spongiarum LMB bulk10E (contamination screened)',oid:2590828850 },
1451353: { id: 1451353, clade:'',name:'candidatus Synechococcus spongiarum SH4',oid:2568526428 },
1499498: { id: 1499498, clade:'LLII/III',name:'Prochlorococcus sp. MIT0601',oid:2606217319 },
1499499: { id: 1499499, clade:'LLII/III',name:'Prochlorococcus sp. MIT0602',oid:2606217317 },
1499500: { id: 1499500, clade:'LLII/III',name:'Prochlorococcus sp. MIT0603',oid:2606217686 },
1499501: { id: 1499501, clade:'LLII/III',name:'Prochlorococcus sp. SS52',oid:2606217314 },
1499502: { id: 1499502, clade:'LLIV',name:'Prochlorococcus sp. MIT0701',oid:2606217684 },
1499503: { id: 1499503, clade:'LLIV',name:'Prochlorococcus sp. MIT0702',oid:2606217681 },
1499504: { id: 1499504, clade:'LLIV',name:'Prochlorococcus sp. MIT0703',oid:2606217682 },
1501268: { id: 1501268, clade:'HLII',name:'Prochlorococcus sp. MIT0604',oid:2606217688 },
1501269: { id: 1501269, clade:'LLI',name:'Prochlorococcus sp. MIT0801',oid:2606217560 },
},
        newick = Newick.parse("((((569152,569153,1203261,1499502,1499501,1499504,1501268,(159733)98167,613200,1499499,613203,1499503,1499498,(74545,167551,167547,(167539)142554,59924,190047,59922,1041938,167553,167552,167555,167556,59921,(59919)142479,59925,74547,93059,167545,167548,167542,93057,167544,93058,167554,93060,74546,59920,146891,167549,59926,167546,167550)1219,613198,569155,569154,613201,1501269,613199,613202,1499500)1218)1217)1212,(((490193,(1451353,1449122,1449121)431041,110663,32049,195250,232348,166314,84588,221360,195248,374982,221359,321327,1407650,91464,316278,59931,313625,1131,374981,166318,64471,32051,585425,585423,195253,(1140,269084)32046,316279,321332,195498,232363,32047,110662,69042)1129,((197221)146786,1394889)146785)1118)1301283)1117;",spp_data),
        newickNodes = [];

        function buildNewickNodes(node, callback) {
          newickNodes.push(node);
          if (node.branchset) {
            for (var i=0; i < node.branchset.length; i++) {
              buildNewickNodes(node.branchset[i]);
            }
          }
        }
        buildNewickNodes(newick);

        d3.phylogram.buildRadial('#radialtree', newick, {
          width: 1000,
          skipBranchLengthScaling: true
//          skipLabels: true
        });

        d3.phylogram.build('#phylogram', newick, {
          width: 500,
          height: 1000,
          skipBranchLengthScaling: true,
          skipTicks: true
        });

        buildCollapsible();


        function buildCollapsible(){


			var margin = {top: 0, right: 0, bottom: 0, left: 0},
				width = 960 - margin.right - margin.left,
				height = 800 - margin.top - margin.bottom;

			var i = 0,
				duration = 750,
				root;

			var tree = d3.layout.tree()
				.size([height, width]);

//			var diagonal = d3.svg.diagonal()
//				.projection(function(d) { return [d.y, d.x]; });

			var diagonal = function () {
				var projection = function (d) {
					return [d.y, d.x];
				},

				path = function (pathData) {
					return "M" + pathData[0] + ' ' + pathData[1] + " " + pathData[2];
				};

				function diagonal(diagonalPath, i) {
					var source = diagonalPath.source,
						target = diagonalPath.target,
						midpointX = (source.x + target.x) / 2,
						midpointY = (source.y + target.y) / 2,
						pathData = [source, {
							x: target.x,
							y: source.y
						}, target];
					pathData = pathData.map(projection);
					return path(pathData)
				}

				diagonal.projection = function (x) {
					if (!arguments.length) return projection;
					projection = x;
					return diagonal;
				};

				diagonal.path = function (x) {
					if (!arguments.length) return path;
					path = x;
					return diagonal;
				};

				return diagonal;
			};

			var svg = d3.select("#collapse").append("svg")
				.attr("width", width + margin.right + margin.left)
				.attr("height", height + margin.top + margin.bottom)
			  .append("g")
				.attr("transform", "translate(" + margin.left + "," + margin.top + ")");

//			d3.json("/mbostock/raw/4063550/flare.json", function(error, flare) {
//			  if (error) throw error;

			  root = newick;
			  root.x0 = height / 2;
			  root.y0 = 0;

			  function collapse(d) {
				if (d.children) {
				  d._children = d.children;
				  d._children.forEach(collapse);
				  d.children = null;
				}
			  }

			  root.children.forEach(collapse);
			  update(root);
//			});

			d3.select('#collapse').style("height", "800px");

			function update(source) {

			  // Compute the new tree layout.
			  var nodes = tree.nodes(root).reverse(),
				  links = tree.links(nodes);

			  // Normalize for fixed-depth.
			  nodes.forEach(function(d) { d.y = d.depth * 180; });

			  // Update the nodes…
			  var node = svg.selectAll("g.node")
				  .data(nodes, function(d) { return d.id || (d.id = ++i); });

			  // Enter any new nodes at the parent's previous position.
			  var nodeEnter = node.enter().append("g")
				  .attr("class", "node")
				  .attr("transform", function(d) { return "translate(" + source.y0 + "," + source.x0 + ")"; })
				  .on("click", click);

			  nodeEnter.append("circle")
				  .attr("r", 1e-6)
				  .style("fill", function(d) { return d._children ? "lightsteelblue" : "#fff"; });

			  nodeEnter.append("text")
				  .attr("x", function(d) { return d.children || d._children ? -10 : 10; })
				  .attr("dy", ".35em")
				  .attr("text-anchor", function(d) { return d.children || d._children ? "end" : "start"; })
				  .text(function(d) { return d.name; })
				  .style("fill-opacity", 1e-6);

			  // Transition nodes to their new position.
			  var nodeUpdate = node.transition()
				  .duration(duration)
				  .attr("transform", function(d) { return "translate(" + d.y + "," + d.x + ")"; });

			  nodeUpdate.select("circle")
				  .attr("r", 4.5)
				  .style("fill", function(d) { return d._children ? "lightsteelblue" : "#fff"; });

			  nodeUpdate.select("text")
				  .style("fill-opacity", 1);

			  // Transition exiting nodes to the parent's new position.
			  var nodeExit = node.exit().transition()
				  .duration(duration)
				  .attr("transform", function(d) { return "translate(" + source.y + "," + source.x + ")"; })
				  .remove();

			  nodeExit.select("circle")
				  .attr("r", 1e-6);

			  nodeExit.select("text")
				  .style("fill-opacity", 1e-6);

			  // Update the links…
			  var link = svg.selectAll("path.link")
				  .data(links, function(d) { return d.target.id; });

			  // Enter any new links at the parent's previous position.
			  link.enter().insert("path", "g")
				  .attr("class", "link")
				  .attr("d", function(d) {
					var o = {x: source.x0, y: source.y0};
					return diagonal({source: o, target: o});
				  });

			  // Transition links to their new position.
			  link.transition()
				  .duration(duration)
				  .attr("d", diagonal);

			  // Transition exiting nodes to the parent's new position.
			  link.exit().transition()
				  .duration(duration)
				  .attr("d", function(d) {
					var o = {x: source.x, y: source.y};
					return diagonal({source: o, target: o});
				  })
				  .remove();

			  // Stash the old positions for transition.
			  nodes.forEach(function(d) {
				d.x0 = d.x;
				d.y0 = d.y;
			  });
			}

			// Toggle children on click.
			function click(d) {
			  if (d.children) {
				d._children = d.children;
				d.children = null;
			  } else {
				d.children = d._children;
				d._children = null;
			  }
			  update(d);
			}

		}

      }
    </script>
    <style type="text/css" media="screen">
      body { font-family: "Helvetica Neue", Helvetica, sans-serif; }
    </style>
  </head>
  <body onload="load()">
  <h1>d3 phylograms</h1>
  <p>The following trees use phylogenetic data from NCBI with taxon data from IMG, if available. Trees were generated using <a rel="external" href="http://phylot.biobyte.de/index.html">phyloT's common tree generator</a> with all IMG species with an NCBI taxon ID and the genus <em>Prochloro-</em> or <em>Synechococcus</em> as input.
</p>

	  <h2>Phylogram</h2>
	  <div id='phylogram'></div>
	  <h2>Radial version</h2>
	  <div id='radialtree'></div>
	  <h2>Collapsible</h2>
	  <div id="collapse"></div>

  </body>
</html>
