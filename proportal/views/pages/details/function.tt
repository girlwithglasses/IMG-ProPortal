[%	WRAPPER 'inc/page_wrapper.tt';
	title = self.display_name;
	self = results.function;

	self.db = 'CyCOG';
	self.xref = self.id;

	BLOCK cycog_details;

		vers_arr = [];
		FOR v IN self.in_versions;
			vers_arr.push( '<a href="'
			_ link( 'details', { cycog_version => v } )
			_ '">v'_ v _ '</a>' );
		END;

		data_table = {
			class => 'function-details',
			caption => title,
			tbody => [
				[ 'CyCOG ID', self.id ],
				[ 'Description', self.description ],
				[ 'CyCOG versions', vers_arr.join(", ") ],
				[ 'Cluster size', self.cluster_size ],
				[ 'Unique Taxa', self.unique_taxa ],
				[ 'Duplication Events', self.duplication_events ],
			]
		};
		PROCESS 'inc/generic/attr_value_table.tt';
		attr_value_table( data_table );

	END; # end block

	# Sequence views
	BLOCK sequence;
%]
	<div class="nav_tabs nav_tabs_minimal">
		<input type="radio" name="seqData" id="tab1_seqData" checked >
		<label for="tab1_seqData">DNA</label>

		<input type="radio" name="seqData" id="tab2_seqData">
		<label for="tab2_seqData">Amino Acid</label>


		<div id="tabContent1_seqData" class="tabContent">
			<div class="textDisplay">
			<code> <span style="color: blue">>640083263 DNA polymerase III, beta subunit (EC 2.7.7.7) [Prochlorococcus marinus str. NATL1A: NC_008819] (+)strand</span>
			ATGAAATTAAATTGTTCTCAATCTGAATTAAATAATGCTCTTCAATTGGT
			TAGTAGAGCTGTTTCTAATCGACCGACGCACCCTGTATTAGCTAATGTTT
			TGCTCGCTGCTGATGAGGTAACTGGAAAACTTCGCCTAACTGGTTTTGAC
			TTAAGTTTAGGAATACAAACTTCAATATCTGCTTCTATAGAGAGCAGTGG
			TGCCATAACTTTGCCTGCTAAGTTATTTGGTGAAATTGTTTCGAAATTAT
			CTAACGACTCACCTCTAGTTCTGACATCAGATGAAACTAGTCAACAAGTC
			GAGTTGACTAGTAAAAGTGGAACGTATCAAGTAAGAGGGATGGTGTCTGA
			TGATTTTCCTGATTTACCTTTGGTAGAAAGCGGTAATTCATTTAAATTGA
			ATCCATTATTATTATCTAATGCAATTAAATCAACTTTATTTGCAAGCAGT
			ACTGATGAGGCTAAACAATTACTTACTGGTGTTAATCTTACTTTTGACGG
			ATATGGGATTGAATCTGCAGCAACTGACGGACATAGATTAGCTGTTCTTA
			ATTTAAATAATATATTATCTGATTCAAAAGAGATAGATAGTTCTACTAAA
			TTCGAAAAATTTTCTATTACATTACCTTCCAAATCTTTAAGAGAAGTGGA
			AAAATTTTTAAGTACTTGTGATATTAGTCAGCCAATTAATTTTTTTGTTG
			ATAAAGGACAAGTAGTTTTTATATCAGTAGAAGATATTATAACTATAAGA
			GCTTTAGAAGGTTCTTATCCAAATTATTCGCAATTATTACCTGATACTTT
			TGAAAATGAATTAGAGTTTGATAGGAAAGAATTTATATCTTCATTAGAAC
			GAATTGCTGTTTTAGCAGATCAGCATAATAATGTTATAAAGGTAACGACT
			GACGGCTCTGCAAATTTAATCAAAATTAGTACGGATGCCCAAGATATTGG
			AACAGGTTATGAGTCACTACCTGTCTCTTATAAAGGGGATTCATTTCAAA
			TAGCATTTAATGTTAGATATTTATTAGATGGACTTAAAGTCATAGATTCA
			AACTTGATTAAATTAAGTTGTAATTCTCCAACTACACCTGCGGTTTTCTC
			ACCTATTAATAGTGACGTTAATTTCACTTATCTAGTAATGCCCATACAAA
			TACGAAATTAA
			</code>
			</div>
		</div>

		<div id="tabContent2_seqData" class="tabContent">
			<div class="textDisplay">
			<code> <span style="color: blue">>640083263 YP_001013829 DNA polymerase III, beta subunit (EC 2.7.7.7) [Prochlorococcus marinus str. NATL1A: NC_008819]</span>
			[% self.aa_residue %]
			</code>
			</div>
		</div>
	</div>
[%	END; # end block

	# Gene list
	BLOCK gene_list;

	n_results =  self.cycog_genes.size _ ' gene';
	IF self.cycog_genes.size != 1;
		n_results = n_results _ 's';
	END;
	n_results = n_results _ ' associated with CyCOG:' _ self.id;

		IF results.genes && results.genes.size > 0;

			WRAPPER 'inc/cart/gene_add.tt';
				data_table = results.table;
				data_table.id = 'cycog_gene_list';
				data_table.class = 'gene-list';
				data_table.caption = n_results;
				data_table.tbody = results.genes;
				PROCESS 'inc/generic/table.tt';
			END; # end wrapper

		END;
	END; # end block


	# page layout

	article_title = 'CyCOG:' _ self.id _ ': ' _ self.description;
	PROCESS 'inc/title/function.tt';
	PROCESS 'inc/generic/container_macros.tt';

	sections = [{
		id => 'cycog_details',
		title => 'CyCOG details',
		content => 'cycog_details'
	},
	{	id => 'sequence',
		title => 'CyCOG consensus sequence',
		content => 'sequence'
	},
	{	id => 'gene_list',
		title => 'Gene members',
		content => 'gene_list'
	}];

	layout_page( sections );

END %]
